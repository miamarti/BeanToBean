var BeanToBean={form:function(c){this.str=this.id="";this.obj={};this.constructor(c)},set:function(c,b){for(data in b){var a=document.querySelector(c+' [data-bean="'+data+'"]');"[object HTMLSelectElement]"==a.toString()&&a.multiple?"string"==typeof b[data]?a.value=b[data]:[].map.call(b[data],function(b){[].map.call(a.childNodes,function(a){a.value==b&&(a.selected=!0)})}):void 0!=a.type?"string"==typeof b[data]?"checkbox"==a.type?a.checked="true"==b[data]?!0:!1:a.value=b[data]:"checkbox"==a.type?a.checked=
b[data]:a.value=b[data][0]:a.innerHTML="string"==typeof b[data]?b[data]:b[data][0]}}};
BeanToBean.form.prototype={changeListener:!1,map:void 0,constructor:function(c){var b=this,a=document.querySelector(c);"[object HTMLFormElement]"==a.toString()&&(b.changeListener=!0,a.addEventListener("submit",function(a){b.callback();a.preventDefault();return!1},!1));this.id=c},getMap:function(){void 0==this.map&&(this.map=document.querySelectorAll(this.id+" [data-attribute], "+this.id+" [data-bean], "+this.id+" [data-attribute] option, "+this.id+" [data-bean] option"));return this.map},htmlEntities:function(c){return String(c).replace(/&/g,
"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},reload:function(){var c=this,b="",a={};[].map.call(this.getMap(),function(d){if("[object HTMLSelectElement]"!=d.toString()){var e,f;"[object HTMLOptionElement]"==d.toString()?d.selected&&(e=d.parentNode.dataset.bean,f=d.value,b+=e+"="+encodeURIComponent(escape(c.htmlEntities(f)))+"&",d.parentNode.multiple?(void 0==a[e]&&(a[e]=[]),a[e].push(f)):a[e]=f):(e=d.dataset.bean,f="[object HTMLDivElement]"!=d.toString()&&"[object HTMLSpanElement]"!=
d.toString()&&"[object HTMLParagraphElement]"!=d.toString()?"checkbox"==d.type?d.checked?d.value:"":d.value:d.innerHTML,b+=e+"="+encodeURIComponent(escape(c.htmlEntities(f)))+"&",a[e]=f)}c.changeListener||d.addEventListener("change",c.callback,!1)});c.changeListener=!0;this.str=b;this.obj=a},toString:function(){this.reload();return this.str},toObject:function(){this.reload();return this.obj},callback:function(){return this},setCallback:function(c){this.callback=c;this.reload()},setAutoSubmit:function(c,
b){this.callback=function(){var a=new XMLHttpRequest;a.open("POST",c,!0);a.responseType="json";a.onload=function(a){if(this.readyState==this.DONE)if(200==this.status)try{b(eval("("+this.response+")"))}catch(c){b(eval(this.response))}else b(this)};a.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");a.send(this.toString())};this.reload()}};
